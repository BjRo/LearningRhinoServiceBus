<?xml version="1.0" encoding="utf-8"?>

<configuration>

  <configSections>
    <section name="castle" type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor" />
  </configSections>

  <castle>
    <facilities>
      <facility id="rhino.esb">

        <!-- When using rhino.queus as the underlying transport the bus name is mandatory. 
             Besides you need to set client and server to different ports. -->
        <bus 
          threadCount="1" 
          numberOfRetries="5" 
          endpoint="rhino.queues://localhost:54321/LearningRhinoESB_E2_Sender"
          name="sender" />
        
        
        <messages>
          <!-- This sets up to which endpoint a message type is delivered -->
          <add
            name="Messages.HelloWorldMessage"
            endpoint="rhino.queues://localhost:12345/LearningRhinoESB_E2_Consumer" />
        </messages>
      </facility>
    </facilities>
  </castle>

</configuration>